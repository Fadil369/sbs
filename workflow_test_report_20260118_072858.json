{
  "timestamp": "2026-01-18T07:28:58.818856",
  "summary": {
    "total": 8,
    "passed": 8,
    "failed": 0,
    "duration_ms": 0.8109999999999999
  },
  "results": [
    {
      "name": "Claim Generation",
      "passed": true,
      "duration_ms": 0.063,
      "message": "Generated claim CLM-1D57EDBD with 3 items, total SAR 400.00",
      "details": {
        "claim_id": "CLM-1D57EDBD",
        "patient_name": "Ahmed Al-Rashid",
        "total_amount": 400.0,
        "service_count": 3
      }
    },
    {
      "name": "FHIR Bundle Building",
      "passed": true,
      "duration_ms": 0.106,
      "message": "Built bundle with 4 resources: Patient, Coverage, Organization, Claim",
      "details": {
        "bundle_id": "020a18d6-96a1-4320-a2f9-8ce175fb8da5",
        "resource_count": 4,
        "resource_types": [
          "Patient",
          "Coverage",
          "Organization",
          "Claim"
        ]
      }
    },
    {
      "name": "Code Normalization",
      "passed": true,
      "duration_ms": 0.024,
      "message": "Normalized 3 service codes",
      "details": {
        "normalized_count": 3,
        "mappings": [
          {
            "original_code": "SBS-LAB-001",
            "sbs_code": "SBS-LAB-001",
            "description_en": "Complete Blood Count (CBC)",
            "description_ar": "\u062a\u062d\u0644\u064a\u0644 \u0635\u0648\u0631\u0629 \u062f\u0645 \u0643\u0627\u0645\u0644\u0629",
            "category": "Lab",
            "standard_price": 50.0,
            "confidence": 1.0,
            "mapping_source": "manual"
          },
          {
            "original_code": "SBS-RAD-001",
            "sbs_code": "SBS-RAD-001",
            "description_en": "Chest X-Ray",
            "description_ar": "\u0623\u0634\u0639\u0629 \u0633\u064a\u0646\u064a\u0629 \u0644\u0644\u0635\u062f\u0631",
            "category": "Radiology",
            "standard_price": 150.0,
            "confidence": 1.0,
            "mapping_source": "manual"
          },
          {
            "original_code": "SBS-CONS-001",
            "sbs_code": "SBS-CONS-001",
            "description_en": "General Medical Consultation",
            "description_ar": "\u0627\u0633\u062a\u0634\u0627\u0631\u0629 \u0637\u0628\u064a\u0629 \u0639\u0627\u0645\u0629",
            "category": "Consultation",
            "standard_price": 200.0,
            "confidence": 1.0,
            "mapping_source": "manual"
          }
        ]
      }
    },
    {
      "name": "Financial Rules",
      "passed": true,
      "duration_ms": 0.030000000000000002,
      "message": "Tier 1 (10.0% markup): Claimed SAR 400.00, Allowed SAR 440.00",
      "details": {
        "tier": 1,
        "markup_pct": 10.0,
        "total_claimed": 400.0,
        "total_allowed": 440.0,
        "all_valid": true,
        "validations": [
          {
            "sbs_code": "SBS-LAB-001",
            "claimed": 50.0,
            "max_allowed": 55.00000000000001,
            "is_valid": true,
            "status": "passed"
          },
          {
            "sbs_code": "SBS-RAD-001",
            "claimed": 150.0,
            "max_allowed": 165.0,
            "is_valid": true,
            "status": "passed"
          },
          {
            "sbs_code": "SBS-CONS-001",
            "claimed": 200.0,
            "max_allowed": 220.00000000000003,
            "is_valid": true,
            "status": "passed"
          }
        ]
      }
    },
    {
      "name": "Bundle Signing",
      "passed": true,
      "duration_ms": 0.19799999999999998,
      "message": "Bundle signed with SHA256, signature length: 92 chars",
      "details": {
        "algorithm": "SHA256withRSA",
        "canonical_length": 3637,
        "signature_length": 92,
        "signed_at": "2026-01-18T07:28:58.818036"
      }
    },
    {
      "name": "NPHIES Format Validation",
      "passed": true,
      "duration_ms": 0.022,
      "message": "6/6 validations passed",
      "details": {
        "validations": [
          {
            "check": "Bundle type is 'message'",
            "passed": true
          },
          {
            "check": "Signature present",
            "passed": true
          },
          {
            "check": "Claim resource present",
            "passed": true
          },
          {
            "check": "Claim has 'use' field",
            "passed": true
          },
          {
            "check": "Claim has 'type' field",
            "passed": true
          },
          {
            "check": "Claim has 'item' array",
            "passed": true
          }
        ],
        "passed_count": 6,
        "total_count": 6
      }
    },
    {
      "name": "Transaction Logging",
      "passed": true,
      "duration_ms": 0.179,
      "message": "Transaction TXN-DF8BEF89113B logged successfully",
      "details": {
        "transaction": {
          "transaction_id": "TXN-DF8BEF89113B",
          "transaction_uuid": "a1d40d10-03d2-4bb2-a699-a5c7d375d994",
          "facility_id": 1,
          "request_type": "Claim",
          "fhir_payload_size": 4269,
          "signature_present": true,
          "submission_timestamp": "2026-01-18T07:28:58.818363",
          "status": "pending"
        },
        "required_fields": [
          "transaction_id",
          "transaction_uuid",
          "facility_id",
          "request_type",
          "submission_timestamp",
          "status"
        ],
        "missing_fields": []
      }
    },
    {
      "name": "Database Schema",
      "passed": true,
      "duration_ms": 0.189,
      "message": "Found 8/8 required tables",
      "details": {
        "found_tables": [
          "sbs_master_catalogue",
          "facilities",
          "facility_internal_codes",
          "sbs_normalization_map",
          "pricing_tier_rules",
          "service_bundles",
          "nphies_transactions",
          "facility_certificates"
        ],
        "missing_tables": [],
        "schema_size": 13790
      }
    }
  ],
  "claim_data": {
    "claim_id": "CLM-1D57EDBD",
    "total_amount": 400.0
  }
}